# 通过校园博客对设计模式的思考

## 一、前端

> 观察者模式实现数据变化时的响应式渲染

![观察者模式](https://gitee.com/bloom_lmh/picgo/raw/master/images/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.jpg)

```javascript
// number的改变并会让age变化，age一直保持与初始number一样的值,于是也就不存在响应式这一说了
let number = 19
let person = {
      name: '张山',
      sex: '男',
      age: number
}
number = 20
console.log(person.age) // 19
```

```javascript
// 可以看到当number发生变化的时候age同样发生了更改
let number = 19
let person = {
    name: '张山',
    sex: '男',
}
Object.defineProperty(person, 'age', {
    get() {
      return number
    },
    set(value) {
      number = value
      // 在更改数据之后，调用render重新渲染数据
      render()
    }
})
number = 20
console.log(person.age);// 20
```

## 二、后端

## 总体UML图

![在这里插入图片描述](https://img-blog.csdnimg.cn/e96d4757b6c44b92a5364857924ebd76.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAc3VfenVp,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

## MVC模式

 M称为模型，也就是数据存储层。用于数据的封装和数据的传输。

 V为视图，也就是视图层，用于数据的展示。

C为控制，也就是业务逻辑层，用于流程的控制

### 设计原则

业务层接口的设计原则：一个实体类一个接口，一次提交一个业务方法。业务方法的参数来自表现层。 持久层接口的设计原则：一个实体类一个接口，一次数据库操作一个持久方法。

### 代码案例

文章模块

![在这里插入图片描述](https://img-blog.csdnimg.cn/e9c1cbb2dfad40b4b0ab873b33cd95f1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAc3VfenVp,size_20,color_FFFFFF,t_70,g_se,x_16)

用户模块

![在这里插入图片描述](https://img-blog.csdnimg.cn/e9c1cbb2dfad40b4b0ab873b33cd95f1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,sh![在这里插入图片描述](https://img-blog.csdnimg.cn/a151852ae9214997973fa13f6800c7d2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAc3VfenVp,size_20,color_FFFFFF,t_70,g_se,x_16)



## 代理模式（动态代理实现拦截器）

![在这里插入图片描述](https://img-blog.csdnimg.cn/9c74dc00f50e4dc2bc23583a40d3855f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAc3VfenVp,size_20,color_FFFFFF,t_70,g_se,x_16)

### 代理模式的定义

为其他对象提供一种代理以控制对这个对象的访问。在某些情况下，一个对象不适合或者不能直接引用另一个对象，而代理对象可以在客户端和目标对象之间起到中介的作用。

定义JwtFilter类实现Filter类，在controller接受请求之前使用JwtFilter过滤请求，并检测请求中的Token。